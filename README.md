# Next.js 👋

넥스트 13을 공부해보자(처음 써봄).

[생활코딩 Next.js 13 강의로 공부중](https://www.youtube.com/watch?v=9KOaR6QMb9A&list=PLuHgQVnccGMCwxXsQuEoG-JJ7RlwtNdwJ&index=2)

2023년 12월 14일 ~ 진행 중

<br />

## 🏁 시작하기

현재 폴더에 최신 버전의 next 프로젝트 세팅하는 법은 다음과 같다.

```zsh
npx create-next-app@latest .
npm run dev
```

<br />

<h1>Today I Learned</h1>
<details>
  <summary>DAY 1 - 23.12.14</summary>
  <div>

### 내용

수강한 강의 : 0강, 1강

```
1️⃣ 넥스트는..

Next.js는 리액트를 기반으로 하는 풀스택 웹 어플리케이션 프레임워크다.
-> 풀스택 : 프론트(리액트와 같음) + 백(express와 유사)
-> 웹 어플리케이션 : 웹 앱을 만드는 도구
-> 프레임워크 : 큰 뼈대는 넥스트가 다 해놨으니까 쫌만 하면 된다~!


2️⃣ CSR vs SSR

리액트는 CSR
스크립트 파일을 다운받아야만(브라우저가 스크립트를 실행해야만) 화면이 보임.
즉, js가 실행되지 않는 환경에서는 화면이 표시되지 않기 때문에 검색엔진과 같은 robot들이 컨텐츠를 이용할 수 없다!!

넥스트는 SSR을 지원한다!
서버에서 js가 실행됨.
즉, 브라우저에서 이미 완성된 html을 보기 때문에 검색엔진 친화적임!
+ 사용자도 더 빨리 화면을 볼 수 있음!


3️⃣ create-next-app@latest

일단은 처음 써보니까 강의 나온대로 따라쳤는데 항상 latest로 해야하는건가?
뭔가 @ 뒤로 버전 쓰고 싶게 생김.
근데 공식문서 보니깐 가이드가 latest로 쓰고 있넹
암튼 오늘은 플젝 생성, 레포 만들고 리드미까지 완료!
```

### 회고

```
1️⃣ node -v

next 플젝 세팅하는데 node 버전이 낮다고 터미널한테 혼났다.
귀찮아서 버전 업데이트하는거 맨날 미뤘는데.. 반성 중
16버전 쓰고 있었는데 LTS가 20이네 ㅋㅋ
+ 공식문서 보니까 18 이후로 써야하네..


2️⃣ SEO

왜 SSR이 SEO에 더 좋다 이런지 이제야 알았다.
```

### 추후 액션

```
1️⃣ next 13 전에는 어찌 했을까(page router)

13 이후로 많이 달라졌다 하는게 이거 때문이군
나중에 시간나면 알아봐야지


2️⃣ server component

아직 모르는데 슬쩍 이름만 들어본 개념이다.


3️⃣ create-next-app@latest -> 항상 latest로 해야하는건가?
```

  </div>
</details>

---

<details>
  <summary>DAY 2 - 23.12.15</summary>
  <div>

### 내용

수강한 강의 : 2강, 3강

```javascript
1️⃣ children

// layout.js
export default function RootLayout({ children }) {
  return (
    <html lang="ko">
      <body>{children}</body> -> children에 page.js의 파일의 리턴값이 들어온다
    </html>
  );
}

// page.js
export default function Home() {
  return <div>Hello, Next.js 13!</div>;
}


2️⃣ package.json

dev : 개발할 때
build : 실서버를 위한 배포 -> .next에 저장됨
start : 배포 버전을 서비스
```

### 회고

```
1️⃣ 핑계

이삿짐 싸느라 공부를 거의 못 했다. ㅠ 이것저것 준비할 게 많네..
4강부터 핵심일 것 같은 너낌이라
온전하게 집중하고 싶어서 오늘은 GG.. 낡고 지쳐벌임
```

  </div>
</details>

---

<details>
  <summary>DAY 3 - 23.12.16</summary>
  <div>

### 내용

수강한 강의 : 4강, 5강, 6강, 7강, 8강

```javascript
1️⃣ meta

// layout.js
export const metadata = {
  title: "Awesome Next App",
  description: "Generated by iam454",
};

meta 태그는 이렇게 작성한다!


2️⃣ 라우팅

넥스트에서는 폴더 구조가 라우터의 역할을 한다.

📦src
 ┗ 📂app
 ┃ ┣ 📂create
 ┃ ┃ ┗ 📜page.js
 ┃ ┣ 📜favicon.ico
 ┃ ┣ 📜globals.css
 ┃ ┣ 📜layout.js
 ┃ ┗ 📜page.js

"/create"에 접근했을 때 넥스트는 어떻게 행동하는가?
1. app 폴더 밑에 create 폴더가 있는지 확인
2. create 폴더에 page.js가 있는지 확인
3. create 폴더에 layout.js가 있는지 확인 -> 있다면 이것과 page.js를 결합(3-1), 없다면 부모 폴더의 layout.js와 결합
4. 3-1의 상황에도 부모 폴더의 layout.js의 children에 위치


3️⃣ params

넥스트에서 다이나믹 라우팅은 폴더 이름을 [id]와 같이 만드는 것으로 해결할 수 있다!
props를 통해 id값을 가져올 수 있다.

const Read = (props) => {
  return (
    <div>
      <h2>Read</h2>
      params : {props.params.id}
    </div>
  );
};


4️⃣ SPA

여러 페이지임에도 마치 한 페이지처럼 동작하는 걸 Single Page Application이라고 한다.
리액트에서 라우터로 a 대신 Link를 사용했던 것처럼 넥스트도 거의 같다.

export default function SPA({ children }) {
  return (
    <h1>
      <a href="/">❌ Bad!!</a>
      <Link href="/">✅ Good!!</Link>
    </h1>
  );
}


5️⃣ public

이미지와 같은 정적 자원은 public 폴더 하위에서 관리한다.


6️⃣ css

globals.css : 전역적인 스타일 관리
```

### 회고

```
1️⃣ 신기방기한 라우팅

파일 시스템 기반으로 라우팅한다니 왕 신기하다.
리액트랑 달리 라우터를 설치하지 않아도 되니 편하기도 하다. 뭔가 합쳐져있는 느낌?


2️⃣ 결국 돈인가!

아직까진 왜 넥스트를 사용하는지 잘 모르겠어서 구글링해봤다.
검색이 잘 되는게 굉장히 중요하다! 왜? -> 수익성과 연결되기 때문!
하긴 개발이라는 게 결국 서비스를 만드는 것이니까.. 이제 깨달아버렸다..! ㅋㅋ
```

  </div>
</details>

---

<details>
  <summary>DAY 4 - 23.12.18</summary>
  <div>

### 내용

수강한 강의 : 9강 ~ 17강

```zsh
1️⃣ json-server

포트 9999에 db의 변화를 감지하는 json-server 생성
npx json-server --port 9999 --watch db.json


2️⃣ Server Component vs Client Component

리액트 18버전부터 서버 컴포넌트 개념이 추가되었다고 한다.
지금까지 내가 쓴 useState, useEffect, onClick 요런거 전부 클라이언트 컴포넌트였다.

넥스트는 기본적으로 서버 컴포넌트 방식이며
클라이언트 컴포넌트로 사용하고 싶으면 상단에 "use client"를 적으면 된다.

사용자와 상호작용하지 않는 것은 Server Component로,
사용자와 상호작용하는(버튼 등) 것은 Client Component로 만들면 좋을 듯.


3️⃣ Cache

모든 fetch 요청은 캐시되고 자동으로 중복이 제거된다.
그래서 create하더라도 별다른 옵션 없으면 이전 캐시값이 HIT이기 때문에 새 아이템이 안 나온다.
여기서는 캐시를 지워버려서.. 해결한다.


4️⃣ env

넥스트는 서버 컴포넌트에서만 환경변수 접근이 가능하다.
클라이언트 컴포넌트에서 환경변수를 사용하려면 NEXT_PUBLIC_의 prefix를 사용하면 된다.
```

### 추후 액션

```
1️⃣ Revalidating

cache 아직 잘 모르겠지비
```

  </div>
</details>
